---
# Curtesy of https://github.com/geerlingguy/mac-dev-playbook
sudo: required
language: objective-c
# 10.13 (see https://docs.travis-ci.com/user/osx-ci-environment/#OS-X-Version)
osx_image: xcode9.3

env:
  curl_target: https://raw.githubusercontent.com/eliasnorrby/dotfiles/

git:
  clone: false

before_install:
  # Uninstall existing Homebrew installation.
  - curl -sLO https://raw.githubusercontent.com/Homebrew/install/master/uninstall
  - chmod +x ./uninstall
  - ./uninstall --force
  - sudo rm -rf /usr/local/Homebrew
  - sudo rm -rf /usr/local/Caskroom
  - sudo rm -rf /usr/local/bin/brew
  - pwd
  - ls -la

# before_script:
#   # Remove dotfiles
#   - cd ../
#   - rm -rf dotfiles

script:
  # - >
  #   travis_wait 30
  #   bash <(curl -sL ${curl_target}${TRAVIS_PULL_REQUEST_BRANCH:-TRAVIS_BRANCH}/bootstrap.sh)
  - echo "$TRAVIS_PULL_REQUEST_BRANCH"
  - echo "$TRAVIS_BRANCH"
  - echo "curl -sLO ${curl_target}${TRAVIS_PULL_REQUEST_BRANCH:-TRAVIS_BRANCH}/bootstrap.sh"
  - "curl -sLO ${curl_target}${TRAVIS_PULL_REQUEST_BRANCH:-TRAVIS_BRANCH}/bootstrap.sh"
  - cat bootstrap.sh
  - wc -l bootstrap.sh
  # - ./bootstrap.sh

notifications:
  slack:
    rooms:
      secure: Pa+eRdIWgs4UjYpAnIMBE0eQl+g5GAbbxclaaFrFsAR+7TYK9XuEGdQKNguQ5u/wABjXAwDzEy0JLB49I6/j05vTPLdCg9zOsQbW5t+MBrI15zSFWDCjFguxhVyraRxMpiHFVJDb6ft0Zb3Iz2CEMnh2ptfhcbjtxI70N6VInFIGEw4PK+wpAu67Ykpr1jj4YmO6lFFO00Icl1Rwub3F46Z/fptO+5N/k9vj4mH5bp4dcddNg6vW/5wtJDjcGP7437dleCnCvLKSGINaP7BUjyJldTP+tcXl+5sa71OvGehKYTZWf/Zu0VH0WfA40A84i9D88MWuAIINNLPKwyGYGcjDndRMdEAvnOtSgY+rOUFoNpBrt2Fdr/yqL8din75JU8jDYfgi84CvktI6iCEW/ty0pN/2g/dM2AI5OYBMP5SzhQ+vscsMaZJhBWZZXdTEzywMuj1D+ZqfBo+dqTXsda4pKEjBKl2RXxQYcGTWUfoRNwS6wpSq5hyucBIHpA3szvOxuQngB5fJXPtYauKX8jyizVoYZbyuRT+flM+PA1hQnCPLfneEmGNBMALkXD1aYFrhdVtG+o+C/p5QUkZwykDwLLIsqoml+AwXQ7iq6gupNfMs8Kmmq9OKy+RE7N27QQ3gCQIo0fdhdUxpiMq/BHa5hwuirPKMnbDxvYpCGJE=
    template:
      - "Build <%{build_url}|%{result}> for %{repository_slug}@%{branch} (<%{compare_url}|%{commit}>)"
    on_success: change
    on_failure: always
